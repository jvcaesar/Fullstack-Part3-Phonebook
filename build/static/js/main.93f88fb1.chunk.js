(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var r=t(14),o=t.n(r),c=t(3),u=t(2),a=t(4),i=t.n(a),s="/api/persons",d=function(){return i.a.get(s).then((function(e){return e.data}))},l=function(e){return i.a.post(s,e).then((function(e){return e.data}))},b=function(e){return i.a.delete("".concat(s,"/").concat(e))},j=function(e,n){return i.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},f=t(0),h=function(e){var n=e.person,t=e.deletePerson;return Object(f.jsxs)("div",{children:[n.name," ",n.number,Object(f.jsx)("button",{onClick:t,children:"delete"})]})},m=function(e){var n=e.value,t=e.handler;return Object(f.jsxs)("div",{children:["filter shown with: ",Object(f.jsx)("input",{value:n,onChange:t})]})},O=function(e){var n=e.handleSubmit,t=e.newName,r=e.nameHandler,o=e.newNumber,c=e.numberHandler;return Object(f.jsxs)("form",{onSubmit:n,children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:t,onChange:r})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{value:o,onChange:c})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var n=e.persons,t=e.filterWord,r=e.setAllPersons,o=""===t?n:n.filter((function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())}));return Object(f.jsx)("div",{children:o.map((function(e){return Object(f.jsx)(h,{person:e,deletePerson:function(){return function(e,n,t){window.confirm("Delete ".concat(n,"?"))?(b(e).then((function(e){return t()})),console.log("".concat(n," deleted."))):console.log("".concat(n," not deleted."))}(e.id,e.name,r)}},e.name)}))})},p=function(e){var n=e.message;return null===n?null:Object(f.jsx)("div",{style:{color:"green",background:"lightgrey",borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10,fontSize:20},children:n})},x=function(){var e=Object(u.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1],o=Object(u.useState)(""),a=Object(c.a)(o,2),i=a[0],s=a[1],b=Object(u.useState)(""),h=Object(c.a)(b,2),x=h[0],g=h[1],w=Object(u.useState)(""),k=Object(c.a)(w,2),S=k[0],y=k[1],P=Object(u.useState)(null),C=Object(c.a)(P,2),N=C[0],H=C[1],T=function(){d().then((function(e){return r(e)}))};Object(u.useEffect)(T,[]);return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Phonebook"}),Object(f.jsx)(p,{message:N}),Object(f.jsx)(m,{value:S,handler:function(e){return y(e.target.value)}}),Object(f.jsx)("h2",{children:"add a new"}),Object(f.jsx)(O,{handleSubmit:function(e){e.preventDefault();var n={name:i,number:x},o=function(){var e=t.find((function(e){return e.name===i}));return!!e&&(console.log("Found ".concat(e.name," ").concat(e.id)),e.id)}();o&&window.confirm("".concat(i," is already added to phonebook. Replace old number with new one?"))?j(o,n).then((function(e){r(t.map((function(n){return n.id!==o?n:e}))),H("".concat(i," updated in Phonebook")),setTimeout((function(){H(null)}),5e3)})).catch((function(e){H("".concat(i," was already removed from server")),setTimeout((function(){H(null)}),5e3),r(t.filter((function(e){return e.id!==o})))})):o||(l(n).then((function(e){return r(t.concat(e))})),H("".concat(i," added to Phonebook")),setTimeout((function(){H(null)}),5e3)),s(""),g("")},newName:i,nameHandler:function(e){return s(e.target.value)},newNumber:x,numberHandler:function(e){return g(e.target.value)}}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(v,{persons:t,filterWord:S,setAllPersons:T})]})};o.a.render(Object(f.jsx)(x,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.93f88fb1.chunk.js.map